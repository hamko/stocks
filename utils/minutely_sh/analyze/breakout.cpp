#include <iostream>
#include <string>
#include <vector>
#include "StockMinute.hpp"
#include "leasqr_line.hpp"
#include "stopwatch_util.hpp"
using namespace std;

int main(void)
{
    vector<string> filenames =  {"../7203/20150818", "../7203/20150907", "../7203/20150930", "../7203/20151022",  "../7203/20150819", "../7203/20150908", "../7203/20151001", "../7203/20151023", "../7203/20150820", "../7203/20150909", "../7203/20151002", "../7203/20151026", "../7203/20150821", "../7203/20150910", "../7203/20151005", "../7203/20151027", "../7203/20150824", "../7203/20150911", "../7203/20151006", "../7203/20151028", "../7203/20150825", "../7203/20150914", "../7203/20151007", "../7203/20151029", "../7203/20150826", "../7203/20150915", "../7203/20151008", "../7203/20151030", "../7203/20150827", "../7203/20150916", "../7203/20151009", "../7203/20151102", "../7203/20150828", "../7203/20150917", "../7203/20151013", "../7203/20151104", "../7203/20150831", "../7203/20150918", "../7203/20151014", "../7203/20151105", "../7203/20150901", "../7203/20150924", "../7203/20151015", "../7203/20151106", "../7203/20150902", "../7203/20150925", "../7203/20151016", "../7203/20151109", "../7203/20150903", "../7203/20150928", "../7203/20151020", "../7203/20151110", "../7203/20150904", "../7203/20150929", "../7203/20151021"};


    stopwatch_start(0);
#pragma omp parallel for
    for (int i = 0; i < (int)filenames.size(); i++) {
        StockMinute sm(7203, "Toyota", filenames[i]);
        for (int t = 0; t < 330; t++) {
            double a, b;
            leasqr_line(sm.m_minute, sm.m_owarine, t, 30, LEASQR_LINE_LOWER, 10, &a, &b);
            leasqr_line(sm.m_minute, sm.m_owarine, t, 30, LEASQR_LINE_UPPER, 10, &a, &b);
//            cout << t << " " << a << " " << b << endl;
        }
    }
    double time = stopwatch_end(0);
    cout << time << " #endtime" << endl;

    return 0;
}
